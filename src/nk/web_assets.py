from __future__ import annotations

import base64
from urllib.parse import quote


def build_favicon_svg(
    label: str = "nk",
    *,
    background: str = "#080b16",
    text_color: str = "#f8fafc",
    border_color: str | None = "#ffffff1a",
) -> str:
    """Return a minimalist square SVG badge."""
    normalized = (label or "nk").strip() or "nk"
    normalized = normalized[:2]
    font_size = "26" if len(normalized) > 1 else "32"
    text_y = "40"
    border_markup = (
        f'<rect x="1.5" y="1.5" width="61" height="61" rx="12" ry="12" fill="none" '
        f'stroke="{border_color}" stroke-width="1.5" />'
        if border_color
        else ""
    )
    return f"""<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64" role="img" aria-label="{normalized} icon">
  <rect width="64" height="64" rx="14" ry="14" fill="{background}" />
  {border_markup}
  <text x="32" y="{text_y}" text-anchor="middle" font-family="Inter, 'Hiragino Sans', 'Segoe UI', sans-serif"
        font-size="{font_size}" font-weight="700" fill="{text_color}">{normalized}</text>
</svg>"""


def favicon_data_url(
    label: str = "nk",
    *,
    background: str = "#080b16",
    text_color: str = "#f8fafc",
    border_color: str | None = "#ffffff1a",
) -> str:
    """Build a favicon SVG and wrap it in a data URL for inline use."""
    svg = build_favicon_svg(
        label=label,
        background=background,
        text_color=text_color,
        border_color=border_color,
    )
    return "data:image/svg+xml," + quote(svg)


NK_FAVICON_URL = favicon_data_url()

_APPLE_TOUCH_ICON_PNG_BASE64 = "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"

NK_APPLE_TOUCH_ICON_PNG = base64.b64decode(_APPLE_TOUCH_ICON_PNG_BASE64)

__all__ = [
    "build_favicon_svg",
    "favicon_data_url",
    "NK_FAVICON_URL",
    "NK_APPLE_TOUCH_ICON_PNG",
]
